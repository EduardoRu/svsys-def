"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6630],{8505:(j,v,c)=>{c.d(v,{Z:()=>h});var _=c(177),r=c(4341),n=c(305),u=c(7604),t=c(3953),e=c(6761);let h=(()=>{var C;class k{constructor(m,l){this.router=m,this.auth=l}ngOnInit(){}rToControlInformacion(){this.router.navigate(["/control-informacion"],{replaceUrl:!0})}rToAdministracionCuentas(){this.router.navigate(["/administracion-cuentas"],{replaceUrl:!0})}rToReportes(){this.router.navigate(["/reportes"],{replaceUrl:!0})}rToHistoriaReportes(){this.router.navigate(["/historia-reportes"],{replaceUrl:!0})}rToPanelControl(){this.router.navigate(["/panel-control"],{replaceUrl:!0})}rToMiPerfil(){this.router.navigate(["/mi-perfil"],{replaceUrl:!0})}logout(){this.auth.logout(),this.router.navigate(["/login"],{replaceUrl:!0})}}return(C=k).\u0275fac=function(m){return new(m||C)(t.rXU(n.Ix),t.rXU(e.u))},C.\u0275cmp=t.VBU({type:C,selectors:[["app-menu"]],inputs:{titulo:"titulo"},standalone:!0,features:[t.aNF],decls:39,vars:1,consts:[["contentId","main-content"],[2,"--background","#ffffff"],[1,"text-center","pt-5"],["src","/assets/logo_bg1.png","alt","","srcset","",2,"max-width","50%"],[1,"mt-3",2,"color","white"],[2,"background","#ffffff"],["lines","none","slot","header","color","light","button","",3,"click"],["lines","none","slot","header","color","light","button","",1,"pt-1",3,"click"],[2,"background-color","#ffffff"],[1,"d-grid","gap-2"],["type","button","id","cerrar-sesion",1,"btn","btn-danger",3,"click"],["id","main-content"],[2,"--background","#211F20","color","white"],["slot","start"],["autoHide","false"],[2,"text-align","center"],["slot","end"],["size","large",3,"click"],["slot","icon-only","name","person-circle-outline"]],template:function(m,l){1&m&&(t.j41(0,"div")(1,"ion-menu",0)(2,"ion-content",1)(3,"div",2),t.nrm(4,"img",3),t.j41(5,"h5",4)(6,"b"),t.EFF(7,"Administrador"),t.k0s()()(),t.j41(8,"ion-list",5)(9,"ion-item",6),t.bIt("click",function(){return l.rToPanelControl()}),t.j41(10,"ion-label"),t.EFF(11,"Panel de Control"),t.k0s()(),t.j41(12,"ion-item",7),t.bIt("click",function(){return l.rToReportes()}),t.j41(13,"ion-label"),t.EFF(14,"Reportes"),t.k0s()(),t.j41(15,"ion-item",7),t.bIt("click",function(){return l.rToHistoriaReportes()}),t.j41(16,"ion-label"),t.EFF(17,"Historial de Reportes"),t.k0s()(),t.j41(18,"ion-item",7),t.bIt("click",function(){return l.rToControlInformacion()}),t.j41(19,"ion-label"),t.EFF(20,"Control de Informaci\xf3n"),t.k0s()(),t.j41(21,"ion-item",7),t.bIt("click",function(){return l.rToAdministracionCuentas()}),t.j41(22,"ion-label"),t.EFF(23,"Cuentas"),t.k0s()()()(),t.j41(24,"ion-footer",8)(25,"div",9)(26,"button",10),t.bIt("click",function(){return l.logout()}),t.EFF(27,"Cerrar Sesi\xf3n"),t.k0s()()()(),t.j41(28,"ion-header",11)(29,"ion-toolbar",12)(30,"ion-buttons",13),t.nrm(31,"ion-menu-button",14),t.k0s(),t.j41(32,"ion-text",15)(33,"h4")(34,"b"),t.EFF(35),t.k0s()()(),t.j41(36,"ion-buttons",16)(37,"ion-button",17),t.bIt("click",function(){return l.rToMiPerfil()}),t.nrm(38,"ion-icon",18),t.k0s()()()()()),2&m&&(t.R7$(35),t.JRh(l.titulo))},dependencies:[u.bv,u.Jm,u.QW,u.W9,u.M0,u.eU,u.iq,u.uz,u.he,u.nf,u.oS,u.MC,u.IO,u.ai,_.MD,r.YN,r.X1,n.iI],styles:['@charset "UTF-8";ion-menu[_ngcontent-%COMP%]::part(container){--background: #757374}ion-item[_ngcontent-%COMP%]{--background-color: #c0c0c0;--color: #c0c0c0;--border-color: #c0c0c0;--border-width: 2px;--detail-icon-color: white;--detail-icon-opacity: 1;--detail-icon-font-size: 20px}.cerrar-sesion-toolbar[_ngcontent-%COMP%]{--background: #d6282e;transition:background-color .4s ease;cursor:pointer}.cerrar-sesion-toolbar[_ngcontent-%COMP%]:hover{--background: rgba(151, 43, 43, .692)}#cerrar-sesion[_ngcontent-%COMP%]{color:#fff;transition:color .3s ease}']}),k})()},6630:(j,v,c)=>{c.r(v),c.d(v,{AdministracionCuentasPageModule:()=>U});var _=c(177),r=c(4341),n=c(7604),u=c(305),t=c(467),e=c(3953),h=c(6761);let C=(()=>{var a;class g{constructor(o,i,d,b,A){this.modalController=o,this.fb=i,this.loadController=d,this.alertController=b,this.authService=A}ngOnInit(){this.informacionUsuario=this.fb.group({uid:[this.usuario.id,[r.k0.required]],usuario:[this.usuario.usuario,[r.k0.required,r.k0.minLength(3)]],email:[this.usuario.email,[r.k0.required,r.k0.email]],password:[""],role:[this.usuario.role,[r.k0.required,r.k0.required]]})}presentAlert(o){var i=this;return(0,t.A)(function*(){yield(yield i.alertController.create({message:o,buttons:["OK"]})).present()})()}getInformacionUsuario(){var o=this;return(0,t.A)(function*(){const i=yield o.loadController.create({message:"Espere un momento..."});i.present(),o.informacionUsuario.valid?(o.authService.updateUser(o.informacionUsuario.value).then(d=>{console.log(d),o.presentAlert("Usuario actualizado exitosamente"),i.dismiss()}).catch(d=>{console.log(d),o.presentAlert("Error al actualizar el usuario"),i.dismiss()}),i.dismiss()):(o.presentAlert("Favor de completar toda la informaci\xf3n"),i.dismiss())})()}limpiarFormulario(){this.informacionUsuario.reset()}cancel(){var o=this;return(0,t.A)(function*(){yield o.modalController.dismiss(null,"cancel")})()}}return(a=g).\u0275fac=function(o){return new(o||a)(e.rXU(n.W3),e.rXU(r.ok),e.rXU(n.Xi),e.rXU(n.hG),e.rXU(h.u))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-detalle-cuenta"]],inputs:{usuario:"usuario"},standalone:!0,features:[e.aNF],decls:41,vars:2,consts:[[2,"--background","#757374","color","white"],["slot","end"],[3,"click"],["slot","icon-only","name","close-outline"],[1,"ion-padding"],[1,"row","p-5"],[1,"col-md-4","text-center"],["src","assets/user_sys.png","alt","",2,"height","80%"],[1,"col-md-8"],[3,"ngSubmit","formGroup"],[1,"form-floating","mb-3"],["type","text","id","floatingInputUser","placeholder","Nombre del usuario","formControlName","usuario",1,"form-control"],["for","floatingInputUser"],["type","email","id","floatingInputEmail","placeholder","ejemplo@gmail.com","formControlName","email",1,"form-control"],["for","floatingInputEmail"],["type","text","id","floatingInputPassword","placeholder","*********","formControlName","password",1,"form-control"],["for","floatingInputPassword"],["aria-label","Large select example","formControlName","role",1,"form-select","mb-3"],["value","","selected",""],["value","Administrador"],["value","Capturista"],["value","Analista"],[1,"row","text-center"],[1,"col-md-6","d-grid","gap-2"],["fill","clear",1,"btn","btn-danger","mt-3",3,"click"],["type","submit","fill","clear",1,"btn","btn-success","mt-3"]],template:function(o,i){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",1)(5,"ion-button",2),e.bIt("click",function(){return i.cancel()}),e.nrm(6,"ion-icon",3),e.k0s()()()(),e.j41(7,"ion-content",4)(8,"div",5)(9,"div",6),e.nrm(10,"img",7),e.k0s(),e.j41(11,"div",8)(12,"form",9),e.bIt("ngSubmit",function(){return i.getInformacionUsuario()}),e.j41(13,"div",10),e.nrm(14,"input",11),e.j41(15,"label",12),e.EFF(16,"Nombre de usuario"),e.k0s()(),e.j41(17,"div",10),e.nrm(18,"input",13),e.j41(19,"label",14),e.EFF(20,"Correo electr\xf3nico"),e.k0s()(),e.j41(21,"div",10),e.nrm(22,"input",15),e.j41(23,"label",16),e.EFF(24,"Contrase\xf1a"),e.k0s()(),e.j41(25,"select",17)(26,"option",18),e.EFF(27,"Tipo de usuario"),e.k0s(),e.j41(28,"option",19),e.EFF(29,"Administrador"),e.k0s(),e.j41(30,"option",20),e.EFF(31,"Capturista"),e.k0s(),e.j41(32,"option",21),e.EFF(33,"Analista"),e.k0s()(),e.j41(34,"div",22)(35,"div",23)(36,"ion-button",24),e.bIt("click",function(){return i.limpiarFormulario()}),e.EFF(37,"Eliminar usuario"),e.k0s()(),e.j41(38,"div",23)(39,"ion-button",25),e.EFF(40,"Editar usuario"),e.k0s()()()()()()()),2&o&&(e.R7$(3),e.SpI(" Editar el usuario - ",i.usuario.usuario," "),e.R7$(9),e.Y8G("formGroup",i.informacionUsuario))},dependencies:[_.MD,r.YN,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.X1,r.j4,r.JD,n.bv,n.Jm,n.QW,n.W9,n.eU,n.iq,n.BC,n.ai]}),g})(),k=(()=>{var a;class g{constructor(o,i,d,b,A){this.modalController=o,this.fb=i,this.alertController=d,this.loadingController=b,this.authService=A}ngOnInit(){this.informacionUsuario=this.fb.group({usuario:["",[r.k0.required,r.k0.minLength(3)]],email:["",[r.k0.required,r.k0.email]],password:["",[r.k0.required,r.k0.required]],role:["",[r.k0.required,r.k0.required]]})}presentAlert(o){var i=this;return(0,t.A)(function*(){yield(yield i.alertController.create({message:o,buttons:["OK"]})).present()})()}getInformacionUsuario(){var o=this;return(0,t.A)(function*(){const i=yield o.loadingController.create({message:"Espere un momento..."});if(i.present(),o.informacionUsuario.valid){const d=o.informacionUsuario.value;console.log(d),o.authService.register(d).then(b=>{console.log(b),o.limpiarFormulario()}),o.presentAlert("Se ha agregado el usuario correctamente..."),i.dismiss()}else o.presentAlert("Todos los campos son obligatorios"),i.dismiss()})()}cancel(){var o=this;return(0,t.A)(function*(){yield o.modalController.dismiss(null,"cancel")})()}limpiarFormulario(){var o=this;return(0,t.A)(function*(){o.informacionUsuario.reset()})()}}return(a=g).\u0275fac=function(o){return new(o||a)(e.rXU(n.W3),e.rXU(r.ok),e.rXU(n.hG),e.rXU(n.Xi),e.rXU(h.u))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-agregar-cuenta"]],standalone:!0,features:[e.aNF],decls:41,vars:1,consts:[[2,"--background","#757374","color","white"],["slot","end"],[3,"click"],["slot","icon-only","name","close-outline"],[1,"ion-padding"],[1,"row","p-5"],[1,"col-md-4","text-center"],["src","assets/user_sys.png","alt","",2,"height","80%"],[1,"col-md-8"],[3,"ngSubmit","formGroup"],[1,"form-floating","mb-3"],["type","text","id","floatingInputUser","placeholder","Nombre del usuario","formControlName","usuario",1,"form-control"],["for","floatingInputUser"],["type","email","id","floatingInputEmail","placeholder","ejemplo@gmail.com","formControlName","email",1,"form-control"],["for","floatingInputEmail"],["type","text","id","floatingInputPassword","placeholder","*********","formControlName","password",1,"form-control"],["for","floatingInputPassword"],["aria-label","Large select example","formControlName","role",1,"form-select","mb-3"],["value","","selected",""],["value","Administrador"],["value","Capturista"],["value","Analista"],[1,"row","text-center"],[1,"col-md-6","d-grid","gap-2"],["fill","clear",1,"btn","btn-secondary","mt-3",3,"click"],["type","submit","fill","clear",1,"btn","btn-success","mt-3"]],template:function(o,i){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3," Agrega un nuevo usuario "),e.k0s(),e.j41(4,"ion-buttons",1)(5,"ion-button",2),e.bIt("click",function(){return i.cancel()}),e.nrm(6,"ion-icon",3),e.k0s()()()(),e.j41(7,"ion-content",4)(8,"div",5)(9,"div",6),e.nrm(10,"img",7),e.k0s(),e.j41(11,"div",8)(12,"form",9),e.bIt("ngSubmit",function(){return i.getInformacionUsuario()}),e.j41(13,"div",10),e.nrm(14,"input",11),e.j41(15,"label",12),e.EFF(16,"Nombre de usuario"),e.k0s()(),e.j41(17,"div",10),e.nrm(18,"input",13),e.j41(19,"label",14),e.EFF(20,"Correo electr\xf3nico"),e.k0s()(),e.j41(21,"div",10),e.nrm(22,"input",15),e.j41(23,"label",16),e.EFF(24,"Contrase\xf1a"),e.k0s()(),e.j41(25,"select",17)(26,"option",18),e.EFF(27,"Tipo de usuario"),e.k0s(),e.j41(28,"option",19),e.EFF(29,"Administrador"),e.k0s(),e.j41(30,"option",20),e.EFF(31,"Capturista"),e.k0s(),e.j41(32,"option",21),e.EFF(33,"Analista"),e.k0s()(),e.j41(34,"div",22)(35,"div",23)(36,"ion-button",24),e.bIt("click",function(){return i.limpiarFormulario()}),e.EFF(37,"Limpiar formulario"),e.k0s()(),e.j41(38,"div",23)(39,"ion-button",25),e.EFF(40,"Agregar usuario"),e.k0s()()()()()()()),2&o&&(e.R7$(12),e.Y8G("formGroup",i.informacionUsuario))},dependencies:[n.bv,n.Jm,n.QW,n.W9,n.eU,n.iq,n.BC,n.ai,_.MD,r.YN,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.X1,r.j4,r.JD]}),g})();var s=c(8505);function m(a,g){if(1&a){const p=e.RV6();e.qex(0),e.j41(1,"th",17),e.EFF(2),e.k0s(),e.j41(3,"td",18),e.EFF(4),e.k0s(),e.j41(5,"td",18),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"ion-button",19),e.bIt("click",function(){e.eBV(p);const i=e.XpG().$implicit,d=e.XpG();return e.Njj(d.detailUser(i))}),e.EFF(9," Detalles "),e.k0s()(),e.bVm()}if(2&a){const p=e.XpG().$implicit;e.R7$(2),e.JRh(p.usuario),e.R7$(2),e.JRh(p.email),e.R7$(2),e.JRh(p.role)}}function l(a,g){if(1&a&&(e.j41(0,"tr"),e.DNE(1,m,10,3,"ng-container",16),e.k0s()),2&a){const p=g.index;e.R7$(),e.Y8G("ngIf",p<10)}}const E=[{path:"",component:(()=>{var a;class g{constructor(o,i,d,b){this.authService=o,this.modalController=i,this.alertController=d,this.loadController=b,this.usuariosRegistrados=[]}ngOnInit(){this.getInformacion()}getInformacion(){var o=this;return(0,t.A)(function*(){(yield o.authService.getUsers()).subscribe({next:i=>{o.usuariosRegistrados=i},error:i=>{console.error(i)}})})()}addUser(){var o=this;return(0,t.A)(function*(){(yield o.modalController.create({component:k,cssClass:"modalUsuarios"})).present()})()}detailUser(o){var i=this;return(0,t.A)(function*(){(yield i.modalController.create({component:C,componentProps:{usuario:o},cssClass:"modalUsuarios"})).present()})()}}return(a=g).\u0275fac=function(o){return new(o||a)(e.rXU(h.u),e.rXU(n.W3),e.rXU(n.hG),e.rXU(n.Xi))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-administracion-cuentas"]],decls:28,vars:3,consts:[["titulo","Cuentas"],[3,"fullscreen"],[1,"mx-5"],[2,"background-color","#211F20"],[1,"text-center",2,"color","white"],["placeholder","Buscar usuario","inputmode","decimal","type","decimal","showCancelButton","always",3,"debounce"],[1,"table"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end","color","primary"],["color","primary"],["name","chevron-up-circle"],["side","top"],["color","primary",3,"click"],["name","add-circle-outline"],[4,"ngIf"],["scope","row",1,"center-elements-table","pt-3"],[1,"center-elements-table","pt-3"],["expand","block","color","primary","fill","clear","shape","round",3,"click"]],template:function(o,i){1&o&&(e.nrm(0,"app-menu",0),e.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header",3)(4,"ion-card-title",4),e.EFF(5," LISTA DE USUARIOS "),e.k0s(),e.j41(6,"ion-card-subtitle"),e.nrm(7,"ion-searchbar",5),e.k0s()(),e.j41(8,"ion-card-content")(9,"table",6)(10,"thead")(11,"tr")(12,"th",7),e.EFF(13,"Nombre de usuario"),e.k0s(),e.j41(14,"th",7),e.EFF(15,"Correo el\xe9ctronico"),e.k0s(),e.j41(16,"th",7),e.EFF(17,"Tipo de usuario"),e.k0s(),e.j41(18,"th",8),e.EFF(19,"Acciones"),e.k0s()()(),e.j41(20,"tbody"),e.DNE(21,l,2,1,"tr",9),e.k0s()()()(),e.j41(22,"ion-fab",10)(23,"ion-fab-button",11),e.nrm(24,"ion-icon",12),e.k0s(),e.j41(25,"ion-fab-list",13)(26,"ion-fab-button",14),e.bIt("click",function(){return i.addUser()}),e.nrm(27,"ion-icon",15),e.k0s()()()()),2&o&&(e.R7$(),e.Y8G("fullscreen",!0),e.R7$(6),e.Y8G("debounce",250),e.R7$(14),e.Y8G("ngForOf",i.usuariosRegistrados))},dependencies:[_.Sq,_.bT,n.Jm,n.b_,n.I9,n.ME,n.HW,n.tN,n.W9,n.Q8,n.YW,n.OL,n.iq,n.S1,n.Gw,s.Z],styles:["ion-fab-button[_ngcontent-%COMP%]{--background: #b7f399;--background-activated: #87d361;--background-hover: #a3e681;--border-radius: 15px;--box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, .3), 0px 1px 3px 1px rgba(0, 0, 0, .15);--color: black}"]}),g})()}];let F=(()=>{var a;class g{}return(a=g).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[u.iI.forChild(E),u.iI]}),g})(),U=(()=>{var a;class g{}return(a=g).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[_.MD,r.YN,n.bv,F,s.Z]}),g})()},6761:(j,v,c)=>{c.d(v,{u:()=>e});var _=c(467),r=c(6335),n=c(6114),u=c(9967),t=c(3953);let e=(()=>{var h;class C{constructor(s,m){this.auth=s,this.firestore=m}register({usuario:s,email:m,password:l,role:f}){var E=this;return(0,_.A)(function*(){try{const F=yield(0,r.eJ)(E.auth,m,l),a=(0,u.H9)(E.firestore,`users/${F.user.uid}`);return yield(0,u.BN)(a,{usuario:s,email:m,role:f}),F}catch{return null}})()}login({email:s,password:m}){var l=this;return(0,_.A)(function*(){try{return yield(0,r.x9)(l.auth,s,m)}catch{return null}})()}getUsers(){const s=(0,u.rJ)(this.firestore,"users");return(0,u.xs)(s,{idField:"id"})}getUser(){var s=this;return(0,_.A)(function*(){const m=yield s.auth.currentUser,l=(0,u.H9)(s.firestore,`users/${m.uid}`);return(0,u.Bg)(l,{idField:"id"})})()}getUserRole(){var s=this;return(0,_.A)(function*(){const m=yield s.auth.currentUser;if(m){const l=(0,u.H9)(s.firestore,`users/${m.uid}`),f=(0,u.Bg)(l,{idField:"id"});return(null==f?void 0:f.role)||"user"}return"guest"})()}logout(){return(0,r.CI)(this.auth)}deleteUser(s){var m=this;return(0,_.A)(function*(){try{const l=m.auth.currentUser;if(l){const f=n.IX.credential(l.email,s);yield(0,r.kZ)(l,f),yield(0,r.hG)(l),console.log("Usuario eliminado con \xe9xito")}else console.error("No hay usuario autenticado")}catch(l){console.error("Error al eliminar el usuario:",l)}})()}updateUser(s){var m=this;return(0,_.A)(function*(){try{const l=m.auth.currentUser;if(l){const f=(0,u.H9)(m.firestore,`users/${s.uid}`);return yield(0,u.BN)(f,s,{merge:!0}),s.email&&""!==s.email&&void 0!==s.email&&(yield(0,r.Ww)(l,s.email)),s.password&&""!=s.password&&void 0!==s.password&&console.log("Se actualizo la contrase\xf1a"),{success:!0}}throw new Error("No hay un usuario autenticado")}catch(l){return console.error("Error al actualizar la informaci\xf3n del usuario:",l),{success:!1,error:l}}})()}}return(h=C).\u0275fac=function(s){return new(s||h)(t.KVO(r.Nj),t.KVO(u._7))},h.\u0275prov=t.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),C})()}}]);