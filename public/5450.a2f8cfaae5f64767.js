"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5450],{5450:(N,C,s)=>{s.r(C),s.d(C,{PanelControlPageModule:()=>P});var f=s(177),n=s(4341),r=s(7604),h=s(845),u=s(467),o=s(3953),m=s(9967),b=s(3273),F=s(8737);let p=(()=>{var e;class c{constructor(t,i){this.firestore=t,this.auth=i}getCitaProgramada(){const t=(0,m.rJ)(this.firestore,"citas_programadas");return(0,m.xs)(t,{idField:"id"})}getCitaById(t){const i=(0,m.H9)(this.firestore,`citas_programadas/${t}`);return(0,m.Bg)(i,{idField:"id"})}deleteCita(t){const i=(0,m.H9)(this.firestore,`citas_programadas/${t}`);return(0,b.kd)(i)}addCita(t){return(0,b.gS)((0,m.rJ)(this.firestore,"citas_programadas"),t)}updateCita(t){const i=(0,m.H9)(this.firestore,`citas_programadas/${t.id}`);return(0,m.mZ)(i,{nombre_razon_social:t.nombre_razon_social,telefono:t.telefono,fecha:t.fecha,tipo_servicio:t.tipo_servicio,domicilio:t.domicilio,num:t.num,colonia:t.colonia,municipio:t.municipio,estado:t.estado,cp:t.cp,giro:t.giro})}}return(e=c).\u0275fac=function(t){return new(t||e)(o.KVO(m._7),o.KVO(F.Nj))},e.\u0275prov=o.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),c})(),I=(()=>{var e;class c{constructor(t,i,a,d,g){this.modalController=t,this.fb=i,this.loadingController=a,this.alertConoller=d,this.citasService=g}get nombre_razon_social(){return this.citaInformacion.get("nombre_razon_social")}get telefono(){return this.citaInformacion.get("telefono")}get fecha(){return this.citaInformacion.get("fecha")}get tipo_servicio(){return this.citaInformacion.get("tipo_servicio")}get domicilio(){return this.citaInformacion.get("domicilio")}get num(){return this.citaInformacion.get("num")}get colonia(){return this.citaInformacion.get("colonia")}get municipio(){return this.citaInformacion.get("municipio")}get estado(){return this.citaInformacion.get("estado")}get cp(){return this.citaInformacion.get("cp")}get giro(){return this.citaInformacion.get("giro")}ngOnInit(){this.citaInformacion=this.fb.group({nombre_razon_social:["",[n.k0.required]],telefono:["",[n.k0.required]],fecha:["",[n.k0.required]],tipo_servicio:["",[n.k0.required]],domicilio:["",[n.k0.required]],num:["",[n.k0.required]],colonia:["",[n.k0.required]],municipio:["",[n.k0.required]],estado:["",[n.k0.required]],cp:["",[n.k0.required]],giro:["",[n.k0.required]]})}cancel(){this.modalController.dismiss(null,"cancel")}getCita(){var t=this;return(0,u.A)(function*(){const i=yield t.loadingController.create({message:"Generando cita..."});yield i.present(),t.citaInformacion.valid?(t.citasService.addCita(t.citaInformacion.value),yield(yield t.alertConoller.create({header:"Cita generada",message:"La cita ha sido generada exitosamente",buttons:["OK"]})).present(),t.modalController.dismiss(null,"confirm")):yield(yield t.alertConoller.create({header:"Error",message:"Todos los campos son obligatorios",buttons:["OK"]})).present(),yield i.dismiss()})()}}return(e=c).\u0275fac=function(t){return new(t||e)(o.rXU(r.W3),o.rXU(n.ok),o.rXU(r.Xi),o.rXU(r.hG),o.rXU(p))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-agregar-cita"]],standalone:!0,features:[o.aNF],decls:74,vars:1,consts:[[2,"--background","#757374","color","white"],["slot","end"],[3,"click"],["slot","icon-only","name","close-outline"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],[1,"form-floating","mb-3"],["type","text","id","floatingnombre_razon_social","formControlName","nombre_razon_social",1,"form-control"],["for","floatingnombre_razon_social"],[1,"row"],[1,"col-md-4"],["type","text","id","floatingtelefono","formControlName","telefono",1,"form-control"],["for","floatingtelefono"],["type","text","id","floatingInputfecha","formControlName","fecha",1,"form-control"],["for","floatingInputfecha"],["type","text","id","floatingInputtipo_servicio","formControlName","tipo_servicio",1,"form-control"],["for","floatingInputtipo_servicio"],[1,"col-md-5"],["type","text","id","floatingInputdomicilio","formControlName","domicilio",1,"form-control"],["for","floatingInputdomicilio"],[1,"col-md-2"],["type","number","id","floatingInputnum","formControlName","num",1,"form-control"],["for","floatingInputnum"],["type","text","id","floatingInputcolonia","formControlName","colonia",1,"form-control"],["for","floatingInputcolonia"],[1,"col-md-6"],["type","text","id","floatingInputmunicipio","formControlName","municipio",1,"form-control"],["for","floatingInputmunicipio"],["type","text","id","floatingInputestado","formControlName","estado",1,"form-control"],["for","floatingInputestado"],["type","number","id","floatingInputcp","formControlName","cp",1,"form-control"],["for","floatingInputcp"],["type","text","id","floatingInputgiro","formControlName","giro",1,"form-control"],["for","floatingInputgiro"],[1,"row","text-center"],[1,"col-md-6","d-grid","gap-2"],[1,"btn","btn-secondary","btn-lg","mt-3"],["type","submit",1,"btn","btn-success","mt-3","btn-lg"]],template:function(t,i){1&t&&(o.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),o.EFF(3," Agrega una nueva cita "),o.k0s(),o.j41(4,"ion-buttons",1)(5,"ion-button",2),o.bIt("click",function(){return i.cancel()}),o.nrm(6,"ion-icon",3),o.k0s()()()(),o.j41(7,"ion-content",4)(8,"form",5),o.bIt("ngSubmit",function(){return i.getCita()}),o.j41(9,"div",6),o.nrm(10,"input",7),o.j41(11,"label",8),o.EFF(12,"Raz\xf3n Social y/o Nombre"),o.k0s()(),o.j41(13,"div",9)(14,"div",10)(15,"div",6),o.nrm(16,"input",11),o.j41(17,"label",12),o.EFF(18,"Tel\xe9fono"),o.k0s()()(),o.j41(19,"div",10)(20,"div",6),o.nrm(21,"input",13),o.j41(22,"label",14),o.EFF(23,"Fecha"),o.k0s()()(),o.j41(24,"div",10)(25,"div",6),o.nrm(26,"input",15),o.j41(27,"label",16),o.EFF(28,"Tipo de servicio"),o.k0s()()()(),o.j41(29,"div",9)(30,"div",17)(31,"div",6),o.nrm(32,"input",18),o.j41(33,"label",19),o.EFF(34,"Domicilio"),o.k0s()()(),o.j41(35,"div",20)(36,"div",6),o.nrm(37,"input",21),o.j41(38,"label",22),o.EFF(39,"# Num"),o.k0s()()(),o.j41(40,"div",17)(41,"div",6),o.nrm(42,"input",23),o.j41(43,"label",24),o.EFF(44,"Colonia"),o.k0s()()()(),o.j41(45,"div",9)(46,"div",25)(47,"div",6),o.nrm(48,"input",26),o.j41(49,"label",27),o.EFF(50,"Municipio"),o.k0s()()(),o.j41(51,"div",25)(52,"div",6),o.nrm(53,"input",28),o.j41(54,"label",29),o.EFF(55,"Estado/Edo"),o.k0s()()()(),o.j41(56,"div",9)(57,"div",25)(58,"div",6),o.nrm(59,"input",30),o.j41(60,"label",31),o.EFF(61,"C\xf3digo postal"),o.k0s()()(),o.j41(62,"div",25)(63,"div",6),o.nrm(64,"input",32),o.j41(65,"label",33),o.EFF(66,"Giro empresarial"),o.k0s()()()(),o.j41(67,"div",34)(68,"div",35)(69,"button",36),o.EFF(70,"Limpiar formulario"),o.k0s()(),o.j41(71,"div",35)(72,"button",37),o.EFF(73,"Agregar cita"),o.k0s()()()()()),2&t&&(o.R7$(8),o.Y8G("formGroup",i.citaInformacion))},dependencies:[r.bv,r.Jm,r.QW,r.W9,r.eU,r.iq,r.BC,r.ai,n.YN,n.qT,n.me,n.Q0,n.BC,n.cb,f.MD,n.X1,n.j4,n.JD]}),c})(),_=(()=>{var e;class c{constructor(t,i,a,d,g){this.fb=t,this.modalController=i,this.loadingController=a,this.alertConoller=d,this.citasService=g}ngOnInit(){this.citaInformacion=this.fb.group({id:[this.cita.id],nombre_razon_social:[this.cita.nombre_razon_social,[n.k0.required]],telefono:[this.cita.telefono,[n.k0.required]],fecha:[this.cita.fecha,[n.k0.required]],tipo_servicio:[this.cita.tipo_servicio,[n.k0.required]],domicilio:[this.cita.domicilio,[n.k0.required]],num:[this.cita.num,[n.k0.required]],colonia:[this.cita.colonia,[n.k0.required]],municipio:[this.cita.municipio,[n.k0.required]],estado:[this.cita.estado,[n.k0.required]],cp:[this.cita.cp,[n.k0.required]],giro:[this.cita.giro,[n.k0.required]]})}cancel(){this.modalController.dismiss(null,"cancel")}editarCita(){var t=this;return(0,u.A)(function*(){const i=yield t.loadingController.create({message:"Actualizando cita..."});yield i.present(),t.citaInformacion.valid?(t.citasService.updateCita(t.citaInformacion.value),console.log(t.citaInformacion.value),yield(yield t.alertConoller.create({header:"Cita actualizada",message:"La cita ha sido actualizado exitosamente",buttons:["OK"]})).present(),t.modalController.dismiss(null,"confirm")):yield(yield t.alertConoller.create({header:"Error",message:"Todos los campos son obligatorios",buttons:["OK"]})).present(),yield i.dismiss()})()}eliminarCita(){var t=this;return(0,u.A)(function*(){var a;(yield t.alertConoller.create({header:"Confirmar eliminaci\xf3n",message:"\xbfEst\xe1 seguro de eliminar la cita?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Aceptar",handler:(a=(0,u.A)(function*(){t.citasService.deleteCita(t.cita.id);const d=yield t.loadingController.create({message:"Eliminando cita..."});d.present(),t.modalController.dismiss(null,"confirm"),yield d.dismiss()}),function(){return a.apply(this,arguments)})}]})).present()})()}}return(e=c).\u0275fac=function(t){return new(t||e)(o.rXU(n.ok),o.rXU(r.W3),o.rXU(r.Xi),o.rXU(r.hG),o.rXU(p))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-detalle-cita"]],inputs:{cita:"cita"},standalone:!0,features:[o.aNF],decls:74,vars:2,consts:[[2,"--background","#757374","color","white"],["slot","end"],[3,"click"],["slot","icon-only","name","close-outline"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],[1,"form-floating","mb-3"],["type","text","id","floatingnombre_razon_social","formControlName","nombre_razon_social",1,"form-control"],["for","floatingnombre_razon_social"],[1,"row"],[1,"col-md-4"],["type","text","id","floatingtelefono","formControlName","telefono",1,"form-control"],["for","floatingtelefono"],["type","text","id","floatingInputfecha","formControlName","fecha",1,"form-control"],["for","floatingInputfecha"],["type","text","id","floatingInputtipo_servicio","formControlName","tipo_servicio",1,"form-control"],["for","floatingInputtipo_servicio"],[1,"col-md-5"],["type","text","id","floatingInputdomicilio","formControlName","domicilio",1,"form-control"],["for","floatingInputdomicilio"],[1,"col-md-2"],["type","number","id","floatingInputnum","formControlName","num",1,"form-control"],["for","floatingInputnum"],["type","text","id","floatingInputcolonia","formControlName","colonia",1,"form-control"],["for","floatingInputcolonia"],[1,"col-md-6"],["type","text","id","floatingInputmunicipio","formControlName","municipio",1,"form-control"],["for","floatingInputmunicipio"],["type","text","id","floatingInputestado","formControlName","estado",1,"form-control"],["for","floatingInputestado"],["type","number","id","floatingInputcp","formControlName","cp",1,"form-control"],["for","floatingInputcp"],["type","text","id","floatingInputgiro","formControlName","giro",1,"form-control"],["for","floatingInputgiro"],[1,"row","text-center"],[1,"col-md-6","d-grid","gap-2"],["fill","clear",1,"btn","btn-danger","btn-lg","mt-3",3,"click"],["type","submit",1,"btn","btn-success","mt-3","btn-lg"]],template:function(t,i){1&t&&(o.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),o.EFF(3),o.k0s(),o.j41(4,"ion-buttons",1)(5,"ion-button",2),o.bIt("click",function(){return i.cancel()}),o.nrm(6,"ion-icon",3),o.k0s()()()(),o.j41(7,"ion-content",4)(8,"form",5),o.bIt("ngSubmit",function(){return i.editarCita()}),o.j41(9,"div",6),o.nrm(10,"input",7),o.j41(11,"label",8),o.EFF(12,"Raz\xf3n Social y/o Nombre"),o.k0s()(),o.j41(13,"div",9)(14,"div",10)(15,"div",6),o.nrm(16,"input",11),o.j41(17,"label",12),o.EFF(18,"Tel\xe9fono"),o.k0s()()(),o.j41(19,"div",10)(20,"div",6),o.nrm(21,"input",13),o.j41(22,"label",14),o.EFF(23,"Fecha"),o.k0s()()(),o.j41(24,"div",10)(25,"div",6),o.nrm(26,"input",15),o.j41(27,"label",16),o.EFF(28,"Tipo de servicio"),o.k0s()()()(),o.j41(29,"div",9)(30,"div",17)(31,"div",6),o.nrm(32,"input",18),o.j41(33,"label",19),o.EFF(34,"Domicilio"),o.k0s()()(),o.j41(35,"div",20)(36,"div",6),o.nrm(37,"input",21),o.j41(38,"label",22),o.EFF(39,"# Num"),o.k0s()()(),o.j41(40,"div",17)(41,"div",6),o.nrm(42,"input",23),o.j41(43,"label",24),o.EFF(44,"Colonia"),o.k0s()()()(),o.j41(45,"div",9)(46,"div",25)(47,"div",6),o.nrm(48,"input",26),o.j41(49,"label",27),o.EFF(50,"Municipio"),o.k0s()()(),o.j41(51,"div",25)(52,"div",6),o.nrm(53,"input",28),o.j41(54,"label",29),o.EFF(55,"Estado/Edo"),o.k0s()()()(),o.j41(56,"div",9)(57,"div",25)(58,"div",6),o.nrm(59,"input",30),o.j41(60,"label",31),o.EFF(61,"C\xf3digo postal"),o.k0s()()(),o.j41(62,"div",25)(63,"div",6),o.nrm(64,"input",32),o.j41(65,"label",33),o.EFF(66,"Giro empresarial"),o.k0s()()()(),o.j41(67,"div",34)(68,"div",35)(69,"ion-button",36),o.bIt("click",function(){return i.eliminarCita()}),o.EFF(70,"Eliminar cita"),o.k0s()(),o.j41(71,"div",35)(72,"button",37),o.EFF(73,"EDITAR CITA"),o.k0s()()()()()),2&t&&(o.R7$(3),o.SpI(" Editar cita - ",i.cita.nombre_razon_social," "),o.R7$(5),o.Y8G("formGroup",i.citaInformacion))},dependencies:[r.bv,r.Jm,r.QW,r.W9,r.eU,r.iq,r.BC,r.ai,f.MD,n.YN,n.qT,n.me,n.Q0,n.BC,n.cb,n.X1,n.j4,n.JD]}),c})();var v=s(8505);function k(e,c){if(1&e){const l=o.RV6();o.qex(0),o.j41(1,"th",17),o.EFF(2),o.k0s(),o.j41(3,"td"),o.EFF(4),o.k0s(),o.j41(5,"td"),o.EFF(6),o.k0s(),o.j41(7,"td"),o.EFF(8),o.k0s(),o.j41(9,"td")(10,"ion-button",18),o.bIt("click",function(){o.eBV(l);const i=o.XpG().$implicit,a=o.XpG();return o.Njj(a.mostrarDetalles(i))}),o.EFF(11," Detalles "),o.k0s()(),o.bVm()}if(2&e){const l=o.XpG().$implicit;o.R7$(2),o.JRh(l.nombre_razon_social),o.R7$(2),o.JRh(l.domicilio),o.R7$(2),o.JRh(l.tipo_servicio),o.R7$(2),o.JRh(l.fecha)}}function j(e,c){if(1&e&&(o.j41(0,"tr"),o.DNE(1,k,12,4,"ng-container",16),o.k0s()),2&e){const l=c.index;o.R7$(),o.Y8G("ngIf",l<5)}}const y=[{path:"",component:(()=>{var e;class c{constructor(t,i,a){this.zone=t,this.citasService=i,this.modalController=a}ngOnInit(){this.getInformacion(),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(()=>{this.zone.run(()=>{this.drawChart()})}),new ResizeObserver(()=>{this.zone.run(()=>{this.drawChart()})}).observe(document.getElementById("chart_div"))}drawChart(){return(0,u.A)(function*(){var i=yield new google.visualization.DataTable;i.addColumn("string","Mes"),i.addColumn("number","Actividad"),i.addRows([["Mes","Actividad"],["Enero",300],["Febrero",450],["Marzo",600],["Abril",700],["Mayo",550],["Junio",800],["Julio",900],["Agosto",750],["Septiembre",850],["Octubre",950],["Noviembre",700],["Diciembre",850]].slice(1)),new google.visualization.LineChart(document.getElementById("chart_div")).draw(i,{legend:{position:"bottom"},width:"100%",height:250})})()}getInformacion(){this.citasService.getCitaProgramada().subscribe(t=>{this.citas=t,this.results=t})}addCita(){var t=this;return(0,u.A)(function*(){(yield t.modalController.create({component:I,cssClass:"modalCitas"})).present()})()}handleInput(t){const i=t.target.value.toLowerCase();this.results=this.citas.filter(a=>a.nombre_razon_social.toLowerCase().indexOf(i)>-1)}mostrarDetalles(t){var i=this;return(0,u.A)(function*(){(yield i.modalController.create({component:_,componentProps:{cita:t},cssClass:"modalCitas"})).present()})()}}return(e=c).\u0275fac=function(t){return new(t||e)(o.rXU(o.SKi),o.rXU(p),o.rXU(r.W3))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-panel-control"]],decls:35,vars:3,consts:[["titulo","Panel de control"],[3,"fullscreen"],[1,"container"],[1,"text-center"],[1,"chart-container"],["id","chart_div"],["placeholder","Buscar cita","type","decimal","showCancelButton","always",3,"ionInput","debounce"],[1,"table"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],["name","chevron-up-circle"],["side","top"],[3,"click"],["name","add-circle-outline"],[4,"ngIf"],["scope","row"],["expand","block","color","success","fill","clear","shape","round",3,"click"]],template:function(t,i){1&t&&(o.nrm(0,"app-menu",0),o.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header")(4,"ion-card-title",3),o.EFF(5," ACTIVIDAD MENSUAL "),o.k0s()(),o.j41(6,"ion-card-content",4),o.nrm(7,"div",5),o.k0s()(),o.j41(8,"ion-card",2)(9,"ion-card-header")(10,"ion-card-title",3),o.EFF(11," CITAS PROGRAMADAS "),o.k0s()(),o.j41(12,"ion-card-content")(13,"ion-searchbar",6),o.bIt("ionInput",function(d){return i.handleInput(d)}),o.k0s(),o.j41(14,"table",7)(15,"thead")(16,"tr")(17,"th",8),o.EFF(18,"Nombre / Raz\xf3n Social"),o.k0s(),o.j41(19,"th",8),o.EFF(20,"Domicilio"),o.k0s(),o.j41(21,"th",8),o.EFF(22,"Tipo de servicio"),o.k0s(),o.j41(23,"th",8),o.EFF(24,"Fecha"),o.k0s(),o.j41(25,"th",9),o.EFF(26,"Administraci\xf3n"),o.k0s()()(),o.j41(27,"tbody"),o.DNE(28,j,2,1,"tr",10),o.k0s()()()(),o.j41(29,"ion-fab",11)(30,"ion-fab-button"),o.nrm(31,"ion-icon",12),o.k0s(),o.j41(32,"ion-fab-list",13)(33,"ion-fab-button",14),o.bIt("click",function(){return i.addCita()}),o.nrm(34,"ion-icon",15),o.k0s()()()()),2&t&&(o.R7$(),o.Y8G("fullscreen",!0),o.R7$(12),o.Y8G("debounce",250),o.R7$(15),o.Y8G("ngForOf",i.results))},dependencies:[f.Sq,f.bT,r.Jm,r.b_,r.I9,r.ME,r.tN,r.W9,r.Q8,r.YW,r.OL,r.iq,r.S1,r.Gw,v.Z],styles:['@charset "UTF-8";#chart_div[_ngcontent-%COMP%]{width:100%;height:100%}.chart-container[_ngcontent-%COMP%]{height:300px}ion-fab-button[_ngcontent-%COMP%]{--background: #b7f399;--background-activated: #87d361;--background-hover: #a3e681;--border-radius: 15px;--box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, .3), 0px 1px 3px 1px rgba(0, 0, 0, .15);--color: black}']}),c})()}];let E=(()=>{var e;class c{}return(e=c).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[h.iI.forChild(y),h.iI]}),c})(),P=(()=>{var e;class c{}return(e=c).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[f.MD,n.YN,r.bv,E,v.Z]}),c})()}}]);