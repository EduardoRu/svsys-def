"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7946],{7946:(k,l,r)=>{r.r(l),r.d(l,{ControlInformacionPageModule:()=>M});var g=r(177),f=r(4341),i=r(7604),d=r(305),u=r(467),n=r(3953),h=r(9207),F=r(1421),C=r(5217),m=r(8505);function P(t,c){1&t&&n.nrm(0,"ion-datetime",19)}function b(t,c){1&t&&n.nrm(0,"ion-datetime",20)}function I(t,c){if(1&t){const a=n.RV6();n.j41(0,"tr")(1,"td"),n.EFF(2),n.k0s(),n.j41(3,"td"),n.EFF(4),n.k0s(),n.j41(5,"td"),n.EFF(6),n.k0s(),n.j41(7,"td"),n.EFF(8),n.k0s(),n.j41(9,"td")(10,"ion-button",21),n.bIt("click",function(){const e=n.eBV(a).$implicit,s=n.XpG();return n.Njj(s.detallesReporte(e))}),n.EFF(11," Detalles "),n.k0s()()()}if(2&t){const a=c.$implicit;n.R7$(2),n.JRh(a.nombreUsuario),n.R7$(2),n.JRh(a.infoCliente.nombre_razon_social),n.R7$(2),n.E5c("",a.infoCliente.domicilio," ",a.infoCliente.colonia," ",a.infoCliente.num_dom,""),n.R7$(2),n.JRh(a.infoBasculas.tipo_inspeccion)}}const R=[{path:"",component:(()=>{var t;class c{constructor(o,e,s){this.dictamenService=o,this.generarDictamen=e,this.storageService=s,this.reportes=[],this.reportesPaginados=[],this.paginaActual=1,this.registrosPorPagina=5}ngOnInit(){this.getInformacion()}getInformacion(){var o=this;return(0,u.A)(function*(){o.dictamenService.getReporte().subscribe({next:e=>{o.reportes=e,o.actualizarTabla()},error:e=>{console.error(e)}})})()}getTotalPaginas(){return Math.ceil(this.reportes.length/this.registrosPorPagina)}actualizarTabla(){const o=(this.paginaActual-1)*this.registrosPorPagina;this.reportesPaginados=this.reportes.slice(o,o+this.registrosPorPagina)}paginaSiguiente(){this.paginaActual<this.getTotalPaginas()&&(this.paginaActual++,this.actualizarTabla())}paginaAnterior(){this.paginaActual>1&&(this.paginaActual--,this.actualizarTabla())}detallesReporte(o){var e=this;return(0,u.A)(function*(){try{const s=yield e.storageService.getValue("usuario"),p=yield e.generarDictamen.getBase64ImageFromURL("assets/logo_bg1.png");if(!p)return void console.error("No se pudo cargar la imagen.");yield e.generarDictamen.generarReporte(o.infoCliente,o.infoPago,o.infoVisuales,o.encuesta,o.infoBasculas,o.estudioMtro,o.infoResumen,o.firmaInspector,o.firmaCliente,o.firmaPa,s,p),console.log("Reporte generado exitosamente.")}catch(s){console.error("Error al generar el reporte:",s)}})()}}return(t=c).\u0275fac=function(o){return new(o||t)(n.rXU(h.M),n.rXU(F.z),n.rXU(C.n))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-control-informacion"]],decls:49,vars:9,consts:[["titulo","Control de informaci\xf3n"],[3,"fullscreen"],[1,"m-4",2,"border-radius","15px"],[2,"background-color","#211F20"],[1,"row"],[1,"col-md-9"],[2,"color","white","text-align","center"],["showCancelButton","always","mode","ios","color","light","cancel-button-text","Borrar","placeholder","BUSCAR INFORMACI\xd3N POR NOMBRE O RAZ\xd3N SOCIAL",3,"debounce"],[1,"col-md-3"],[1,"row","mt-4"],[1,"col-md-6"],["datetime","datetimeIni"],[3,"keepContentsMounted"],["datetime","datetimeFin"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"pagination"],[3,"click","disabled"],["presentation","date","id","datetimeIni"],["presentation","date","id","datetimeFin"],["expand","block","fill","clear","shape","round",3,"click"]],template:function(o,e){1&o&&(n.nrm(0,"app-menu",0),n.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header",3)(4,"ion-card-subtitle")(5,"div",4)(6,"div",5)(7,"h5",6),n.EFF(8,"B\xfasqueda por nombre"),n.k0s(),n.nrm(9,"ion-searchbar",7),n.k0s(),n.j41(10,"div",8)(11,"h5",6),n.EFF(12,"Rango de fechas"),n.k0s(),n.j41(13,"div",9)(14,"div",10)(15,"h6",6),n.EFF(16,"Fecha Inicio"),n.k0s(),n.nrm(17,"ion-datetime-button",11),n.j41(18,"ion-modal",12),n.DNE(19,P,1,0,"ng-template"),n.k0s()(),n.j41(20,"div",10)(21,"h6",6),n.EFF(22,"Fecha Fin"),n.k0s(),n.nrm(23,"ion-datetime-button",13),n.j41(24,"ion-modal",12),n.DNE(25,b,1,0,"ng-template"),n.k0s()()()()()()(),n.j41(26,"ion-card-content")(27,"table",14)(28,"thead")(29,"tr")(30,"th",15),n.EFF(31,"Inspector"),n.k0s(),n.j41(32,"th",15),n.EFF(33,"Nombre / Raz\xf3n Social"),n.k0s(),n.j41(34,"th",15),n.EFF(35,"Domicilio"),n.k0s(),n.j41(36,"th",15),n.EFF(37,"Tipo de inspecci\xf3n"),n.k0s(),n.j41(38,"th",15),n.EFF(39,"Administraci\xf3n"),n.k0s()()(),n.j41(40,"tbody"),n.DNE(41,I,12,6,"tr",16),n.k0s()(),n.j41(42,"div",17)(43,"ion-button",18),n.bIt("click",function(){return e.paginaAnterior()}),n.EFF(44,"Anterior"),n.k0s(),n.j41(45,"ion-label"),n.EFF(46),n.k0s(),n.j41(47,"ion-button",18),n.bIt("click",function(){return e.paginaSiguiente()}),n.EFF(48,"Siguiente"),n.k0s()()()()()),2&o&&(n.R7$(),n.Y8G("fullscreen",!0),n.R7$(8),n.Y8G("debounce",250),n.R7$(9),n.Y8G("keepContentsMounted",!0),n.R7$(6),n.Y8G("keepContentsMounted",!0),n.R7$(17),n.Y8G("ngForOf",e.reportesPaginados),n.R7$(2),n.Y8G("disabled",1===e.paginaActual),n.R7$(3),n.Lme("",e.paginaActual," / ",e.getTotalPaginas(),""),n.R7$(),n.Y8G("disabled",e.paginaActual===e.getTotalPaginas()))},dependencies:[g.Sq,i.Jm,i.b_,i.I9,i.ME,i.HW,i.W9,i.A9,i.K4,i.he,i.S1,i.Sb,i.Je,i.Gw,m.Z],styles:[".table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:16px;font-weight:700;background-color:#f8f8f8;padding:12px;border-bottom:1px solid #ddd}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;padding:12px;border-bottom:1px solid #ddd}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:15px;gap:10px}.pagination[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #007bff;--color: white;--border-radius: 4px}.pagination[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:#333}.pagination[_ngcontent-%COMP%]   ion-button[disabled][_ngcontent-%COMP%]{opacity:.6;pointer-events:none;--background: #ccc}"]}),c})()}];let v=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[d.iI.forChild(R),d.iI]}),c})(),M=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[g.MD,f.YN,i.bv,v,m.Z]}),c})()}}]);