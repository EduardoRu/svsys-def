"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(y,v,a)=>{a.r(v),a.d(v,{LoginPageModule:()=>s});var g=a(177),o=a(4341),l=a(7604),u=a(305),m=a(467),e=a(3953),f=a(6761);const P=[{path:"",component:(()=>{var r;class i{constructor(t,c,h,_,C){this.fb=t,this.loadingController=c,this.alertController=h,this.authService=_,this.router=C}get email(){return this.credenciales.get("email")}get password(){return this.credenciales.get("password")}ngOnInit(){this.credenciales=this.fb.group({email:["",[o.k0.required,o.k0.email]],password:["",[o.k0.required,o.k0.minLength(6)]]})}login(){var t=this;return(0,m.A)(function*(){const c=yield t.loadingController.create();yield c.present();const h=yield t.authService.login(t.credenciales.value);yield c.dismiss(),h?t.router.navigateByUrl("/panel-control",{replaceUrl:!0}):t.showAlert("Algo salio mal","Favor de volver a intentar!")})()}showAlert(t,c){var h=this;return(0,m.A)(function*(){yield(yield h.alertController.create({header:t,message:c,buttons:["OK"]})).present()})()}}return(r=i).\u0275fac=function(t){return new(t||r)(e.rXU(o.ok),e.rXU(l.Xi),e.rXU(l.hG),e.rXU(f.u),e.rXU(u.Ix))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-login"]],decls:31,vars:1,consts:[[1,"contenedor"],[1,"login-cont"],[1,"text-center"],["src","/assets/logo_bg1.png","alt","Imagen",2,"width","200px"],[3,"ngSubmit","formGroup"],["labelPlacement","floating","fill","outline","formControlName","email"],["slot","label"],["color","danger"],["type","password","labelPlacement","floating","fill","outline","formControlName","password"],["type","submit","color","dark","size","default"]],template:function(t,c){1&t&&(e.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"ion-card")(4,"ion-card-header",2)(5,"ion-card-title")(6,"b"),e.EFF(7,"INICIO DE SESI\xd3N"),e.k0s()(),e.nrm(8,"hr"),e.j41(9,"ion-card-subtitle"),e.nrm(10,"img",3),e.k0s(),e.nrm(11,"hr"),e.k0s(),e.j41(12,"ion-card-content")(13,"form",4),e.bIt("ngSubmit",function(){return c.login()}),e.j41(14,"div")(15,"ion-input",5)(16,"div",6),e.EFF(17,"Email "),e.j41(18,"ion-text",7),e.EFF(19,"(Requerido)"),e.k0s()()()(),e.nrm(20,"br"),e.j41(21,"div")(22,"ion-input",8)(23,"div",6),e.EFF(24,"Contrase\xf1a "),e.j41(25,"ion-text",7),e.EFF(26,"(Requerido)"),e.k0s()()()(),e.nrm(27,"hr"),e.j41(28,"div",2)(29,"ion-button",9),e.EFF(30,"Iniciar sesi\xf3n"),e.k0s()()()()()()()()),2&t&&(e.R7$(13),e.Y8G("formGroup",c.credenciales))},dependencies:[o.qT,o.BC,o.cb,l.Jm,l.b_,l.I9,l.ME,l.HW,l.tN,l.W9,l.$w,l.IO,l.Gw,o.j4,o.JD],styles:["ion-content[_ngcontent-%COMP%]::part(background){background:#ebebeb}.contenedor[_ngcontent-%COMP%]{position:relative}@media screen and (min-width: 1600px){ion-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:0;padding:15%;width:250%}.login-cont[_ngcontent-%COMP%]{position:absolute;transform:translate(240%,12%)}}@media screen and (min-width: 1200px) and (max-width: 1599px){ion-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:0;padding:15%;width:200%}.login-cont[_ngcontent-%COMP%]{position:absolute;transform:translate(190%)}}@media screen and (min-width: 768px) and (max-width: 1199px){ion-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:0;padding:3%;width:150%}.login-cont[_ngcontent-%COMP%]{position:absolute;transform:translate(120%,3%)}}@media screen and (max-width: 767px){ion-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:0;padding:3%;width:115%}.login-cont[_ngcontent-%COMP%]{position:absolute;transform:translate(17%,10%)}}"]}),i})()}];let n=(()=>{var r;class i{}return(r=i).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[u.iI.forChild(P),u.iI]}),i})(),s=(()=>{var r;class i{}return(r=i).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.MD,o.YN,l.bv,n,o.X1]}),i})()},6761:(y,v,a)=>{a.d(v,{u:()=>e});var g=a(467),o=a(6335),l=a(6114),u=a(9967),m=a(3953);let e=(()=>{var f;class p{constructor(n,s){this.auth=n,this.firestore=s}register({usuario:n,email:s,password:r,role:i}){var d=this;return(0,g.A)(function*(){try{const t=yield(0,o.eJ)(d.auth,s,r),h=(0,u.H9)(d.firestore,`users/${t.user.uid}`);return yield(0,u.BN)(h,{usuario:n,email:s,role:i}),t}catch{return null}})()}login({email:n,password:s}){var r=this;return(0,g.A)(function*(){try{return yield(0,o.x9)(r.auth,n,s)}catch{return null}})()}getUsers(){const n=(0,u.rJ)(this.firestore,"users");return(0,u.xs)(n,{idField:"id"})}getUser(){var n=this;return(0,g.A)(function*(){const s=yield n.auth.currentUser,r=(0,u.H9)(n.firestore,`users/${s.uid}`);return(0,u.Bg)(r,{idField:"id"})})()}getUserRole(){var n=this;return(0,g.A)(function*(){const s=yield n.auth.currentUser;if(s){const r=(0,u.H9)(n.firestore,`users/${s.uid}`),i=(0,u.Bg)(r,{idField:"id"});return(null==i?void 0:i.role)||"user"}return"guest"})()}logout(){return(0,o.CI)(this.auth)}deleteUser(n){var s=this;return(0,g.A)(function*(){try{const r=s.auth.currentUser;if(r){const i=l.IX.credential(r.email,n);yield(0,o.kZ)(r,i),yield(0,o.hG)(r),console.log("Usuario eliminado con \xe9xito")}else console.error("No hay usuario autenticado")}catch(r){console.error("Error al eliminar el usuario:",r)}})()}updateUser(n){var s=this;return(0,g.A)(function*(){try{const r=s.auth.currentUser;if(r){const i=(0,u.H9)(s.firestore,`users/${n.uid}`);return yield(0,u.BN)(i,n,{merge:!0}),n.email&&""!==n.email&&void 0!==n.email&&(yield(0,o.Ww)(r,n.email)),n.password&&""!=n.password&&void 0!==n.password&&console.log("Se actualizo la contrase\xf1a"),{success:!0}}throw new Error("No hay un usuario autenticado")}catch(r){return console.error("Error al actualizar la informaci\xf3n del usuario:",r),{success:!1,error:r}}})()}}return(f=p).\u0275fac=function(n){return new(n||f)(m.KVO(o.Nj),m.KVO(u._7))},f.\u0275prov=m.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),p})()}}]);