"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(O,m,o)=>{o.r(m),o.d(m,{LoginPageModule:()=>i});var d=o(177),s=o(4341),g=o(7604),c=o(305),f=o(467),r=o(3953),p=o(6761),n=o(5217);const h=[{path:"",component:(()=>{var e;class l{constructor(u,v,P,y,E,M){this.fb=u,this.loadingController=v,this.alertController=P,this.authService=y,this.router=E,this.storageSerive=M}get email(){return this.credenciales.get("email")}get password(){return this.credenciales.get("password")}ngOnInit(){this.credenciales=this.fb.group({email:["",[s.k0.required,s.k0.email]],password:["",[s.k0.required,s.k0.minLength(6)]]})}login(){var u=this;return(0,f.A)(function*(){(yield u.authService.login(u.credenciales.value))?u.router.navigateByUrl("/panel-control",{replaceUrl:!0}):u.showAlert("Algo salio mal","Favor de volver a intentar!")})()}showAlert(u,v){var P=this;return(0,f.A)(function*(){yield(yield P.alertController.create({header:u,message:v,buttons:["OK"]})).present()})()}}return(e=l).\u0275fac=function(u){return new(u||e)(r.rXU(s.ok),r.rXU(g.Xi),r.rXU(g.hG),r.rXU(p.u),r.rXU(c.Ix),r.rXU(n.n))},e.\u0275cmp=r.VBU({type:e,selectors:[["app-login"]],decls:31,vars:1,consts:[[1,"contenedor"],[1,"login-cont"],[1,"text-center"],["src","/assets/logo_bg1.png","alt","Imagen",2,"width","200px"],[3,"ngSubmit","formGroup"],["labelPlacement","floating","fill","outline","formControlName","email"],["slot","label"],["color","danger"],["type","password","labelPlacement","floating","fill","outline","formControlName","password"],["type","submit","color","dark","size","default"]],template:function(u,v){1&u&&(r.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"ion-card")(4,"ion-card-header",2)(5,"ion-card-title")(6,"b"),r.EFF(7,"INICIO DE SESI\xd3N"),r.k0s()(),r.nrm(8,"hr"),r.j41(9,"ion-card-subtitle"),r.nrm(10,"img",3),r.k0s(),r.nrm(11,"hr"),r.k0s(),r.j41(12,"ion-card-content")(13,"form",4),r.bIt("ngSubmit",function(){return v.login()}),r.j41(14,"div")(15,"ion-input",5)(16,"div",6),r.EFF(17,"Email "),r.j41(18,"ion-text",7),r.EFF(19,"(Requerido)"),r.k0s()()()(),r.nrm(20,"br"),r.j41(21,"div")(22,"ion-input",8)(23,"div",6),r.EFF(24,"Contrase\xf1a "),r.j41(25,"ion-text",7),r.EFF(26,"(Requerido)"),r.k0s()()()(),r.nrm(27,"hr"),r.j41(28,"div",2)(29,"ion-button",9),r.EFF(30,"Iniciar sesi\xf3n"),r.k0s()()()()()()()()),2&u&&(r.R7$(13),r.Y8G("formGroup",v.credenciales))},dependencies:[s.qT,s.BC,s.cb,g.Jm,g.b_,g.I9,g.ME,g.HW,g.tN,g.W9,g.$w,g.IO,g.Gw,s.j4,s.JD],styles:["ion-content[_ngcontent-%COMP%]::part(background){background:#ebebeb}.contenedor[_ngcontent-%COMP%]{position:relative}@media screen and (min-width: 1600px){ion-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:0;padding:15%;width:250%}.login-cont[_ngcontent-%COMP%]{position:absolute;transform:translate(240%,12%)}}@media screen and (min-width: 1200px) and (max-width: 1599px){ion-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:0;padding:15%;width:200%}.login-cont[_ngcontent-%COMP%]{position:absolute;transform:translate(190%)}}@media screen and (min-width: 768px) and (max-width: 1199px){ion-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:0;padding:3%;width:150%}.login-cont[_ngcontent-%COMP%]{position:absolute;transform:translate(120%,3%)}}@media screen and (max-width: 767px){ion-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:0;padding:3%;width:115%}.login-cont[_ngcontent-%COMP%]{position:absolute;transform:translate(17%,10%)}}"]}),l})()}];let t=(()=>{var e;class l{}return(e=l).\u0275fac=function(u){return new(u||e)},e.\u0275mod=r.$C({type:e}),e.\u0275inj=r.G2t({imports:[c.iI.forChild(h),c.iI]}),l})(),i=(()=>{var e;class l{}return(e=l).\u0275fac=function(u){return new(u||e)},e.\u0275mod=r.$C({type:e}),e.\u0275inj=r.G2t({imports:[d.MD,s.YN,g.bv,t,s.X1]}),l})()},6761:(O,m,o)=>{o.d(m,{u:()=>p});var d=o(467),s=o(6335),g=o(6114),c=o(9967),f=o(3953),r=o(1626);let p=(()=>{var n;class a{constructor(t,i,e){this.auth=t,this.firestore=i,this.http=e}register({usuario:t,email:i,password:e,role:l,autos:_,herramientas:u,documentos:v,reportes:P}){var y=this;return(0,d.A)(function*(){try{const E=yield(0,s.eJ)(y.auth,i,e),C=(0,c.H9)(y.firestore,`users/${E.user.uid}`);return yield(0,c.BN)(C,{usuario:t,email:i,role:l,autos:_,herramientas:u,documentos:v,reportes:P}),E}catch{return null}})()}login({email:t,password:i}){var e=this;return(0,d.A)(function*(){try{return yield(0,s.x9)(e.auth,t,i)}catch{return null}})()}getUsers(){const t=(0,c.rJ)(this.firestore,"users");return(0,c.xs)(t,{idField:"id"})}getUser(){var t=this;return(0,d.A)(function*(){const i=yield t.auth.currentUser,e=(0,c.H9)(t.firestore,`users/${i.uid}`);return(0,c.Bg)(e,{idField:"id"})})()}getUserRole(){var t=this;return(0,d.A)(function*(){const i=yield t.auth.currentUser;if(i){const e=(0,c.H9)(t.firestore,`users/${i.uid}`),l=(0,c.Bg)(e,{idField:"id"});return(null==l?void 0:l.role)||"user"}return"guest"})()}logout(){return(0,s.CI)(this.auth)}deleteUser(t){var i=this;return(0,d.A)(function*(){try{const e=i.auth.currentUser;if(e){const l=g.IX.credential(e.email,t);yield(0,s.kZ)(e,l),yield(0,s.hG)(e),console.log("Usuario eliminado con \xe9xito")}else console.error("No hay usuario autenticado")}catch(e){console.error("Error al eliminar el usuario:",e)}})()}updateUser(t){var i=this;return(0,d.A)(function*(){try{const e=(0,c.H9)(i.firestore,`users/${t.id}`);return(0,c.mZ)(e,{usuario:t.usuario,email:t.email,role:t.role,autos:t.autos,herramientas:t.herramientas})}catch(e){return console.error("Error al actualizar la informaci\xf3n del usuario:",e),{success:!1,error:e}}})()}updateUserFields(t,i,e){var l=this;return(0,d.A)(function*(){const _=(0,c.H9)(l.firestore,"users",t),u={usuario:i,role:e};try{yield(0,c.mZ)(_,u)}catch(v){console.error("Error al actualizar usuario y role: ",v)}})()}}return(n=a).\u0275fac=function(t){return new(t||n)(f.KVO(s.Nj),f.KVO(c._7),f.KVO(r.Qq))},n.\u0275prov=f.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})()},5217:(O,m,o)=>{o.d(m,{n:()=>c});var d=o(467),s=o(3953),g=o(369);let c=(()=>{var f;class r{constructor(n){this.storage=n,this._storage=null,this.init()}init(){var n=this;return(0,d.A)(function*(){const a=yield n.storage.create();n._storage=a})()}addValue(n,a){var h=this;return(0,d.A)(function*(){var t;yield null===(t=h._storage)||void 0===t?void 0:t.set(n,a)})()}getValue(n){var a=this;return(0,d.A)(function*(){var h;return yield null===(h=a._storage)||void 0===h?void 0:h.get(n)})()}updateValue(n,a){var h=this;return(0,d.A)(function*(){var t,i;(yield null===(t=h._storage)||void 0===t?void 0:t.get(n))&&(yield null===(i=h._storage)||void 0===i?void 0:i.set(n,a))})()}removeValue(n){var a=this;return(0,d.A)(function*(){var h;yield null===(h=a._storage)||void 0===h?void 0:h.remove(n)})()}getAllValues(){var n=this;return(0,d.A)(function*(){var a;return yield null===(a=n._storage)||void 0===a?void 0:a.keys()})()}clearTempValues(){var n=this;return(0,d.A)(function*(){var a;yield null===(a=n._storage)||void 0===a?void 0:a.clear()})()}}return(f=r).\u0275fac=function(n){return new(n||f)(s.KVO(g.w))},f.\u0275prov=s.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),r})()}}]);